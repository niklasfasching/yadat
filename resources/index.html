<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <!-- <link href="css/style.css" rel="stylesheet" type="text/css"> -->
  </head>
  <body>
    <style>
     textarea {
       width: 100%;
       height: auto;
     }
    </style>
    <form>
      <div>
        <textarea id="query" name="query" rows="10" cols="80">
{:find [?name]
:where [
[?id :major/name ?name]
]}</textarea>
      </div>
      <div>
        <button type="button" onclick="executeQuery()">Query</button>
      </div>
    </form>
    <div>
      <textarea id="result" name="result" rows="10" cols="80"></textarea>
    </div>

    <script src="main.js" type="text/javascript"></script>
    <script type="text/javascript">
     yadat.js_api
          .slurp('minimal', './human-factors.edn')
          .then((db) => {
            window.db = db;
            executeQuery();
          })

     function executeQuery() {
       const query = document.querySelector("#query").value;
       let result;
       try {
         result = yadat.js_api.query(db, query);
       } catch (e) {
         console.log(e)
         result = e
       }
       document.querySelector("#result").value =
         JSON.stringify(result, null, 2);
     }
    </script>
  </body>
</html>
